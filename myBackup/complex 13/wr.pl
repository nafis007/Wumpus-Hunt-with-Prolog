:-module(main,[go/0]).
go:-current_prolog_flag(argv,_G1769),write(_G1769),nl,'0'(_G1769).
'1'(_G2176,_G2177,_G2178):-open(_G2176,read,_G2182),get_char(_G2182,_G2185),'2'(_G2182,_G2185,_G2189),close(_G2182),'3'(_G2189,_G2177,_G2178).
'0'(_G2590):-use_module(wumpus), (append(_G2603,[_G2594,_G2597,_G2600],_G2590)->open(_G2594,read,_G2609),get_char(_G2609,_G2612),'2'(_G2609,_G2612,_G2616),close(_G2609),atom_number(_G2597,_G2621),atom_number(_G2600,_G2624),catch(call_with_time_limit(10, ('3'(_G2616,_G2621,_G2624),halt)),time_limit_exceeded, (write('TIME LIMIT EXCEEDED'),nl,'4'(_G2616),nl));write('wumpusrun takes 3 arguments: filename XS YS\n')),halt.
'2'(_G3997,_G3998,_G3999):-_G3998=end_of_file->_G3999=[];_G3999=[_G4010|_G4011],'5'(_G3997,_G3998,_G4018,_G4010),'2'(_G3997,_G4018,_G4011).
'5'(_G4407,_G4408,_G4409,_G4410):-_G4408='\n'->_G4410=[],get_char(_G4407,_G4409);_G4408=end_of_file->_G4410=[],_G4409=_G4408;'6'(_G4442,_G4408),_G4410=[_G4442|_G4446],get_char(_G4407,_G4452),'5'(_G4407,_G4452,_G4409,_G4446).
'3'(_G5327,_G5328,_G5329):-'7'(_G5327,_G5328,_G5329,_G5334), ((_G5334=pit;_G5334=wall;_G5334=wumpus)->write('Invalid starting position '),write((_G5328,_G5329)),nl,halt;true),length(_G5327,_G5374),_G5327=[_G5376|_G5377],length(_G5376,_G5383), ('8'(_G5327,_G5383),'9'(_G5327,_G5389)->true;write('Invalid map'),nl,halt),once(initialState(_G5374,_G5383,_G5328,_G5329,_G5412)),'3'(_G5327,_G5389,_G5328,_G5329,_G5374,_G5383,_G5412,0,0).
'3'(_G2729,_G2730,_G2731,_G2732,_G2733,_G2734,_G2735,_G2736,_G2737):-'10'(_G2735,_G2738,_G2739,_G2740),_G2745 is _G2736+1,_G2751 is _G2737+_G2740,'0'(_G2739,_G2731,_G2732,north,_G2729,_G2730,_G2760,_G2761), (_G2761=yes->'11'(_G2729,_G2731,_G2732,_G2739,_G2760,_G2745,_G2751);once(updateState(_G2738,_G2739,_G2760,_G2780)),'3'(_G2729,_G2730,_G2731,_G2732,_G2733,_G2734,_G2780,_G2745,_G2751)).
'10'(_G3201,_G3202,_G3203,_G3204):-once(guess(_G3201,_G3202,_G3203)),'12'(_G3203,_G3204), (_G3204=<100,'13'(_G3203)->true;write('INVALID GUESS: '),write(_G3203),nl,write('ENERGY = '),write(_G3204),nl,halt).
'13'([]).
'13'([east|_G4286]):-'13'(_G4286).
'13'([north|_G4327]):-'13'(_G4327).
'13'([west|_G4368]):-'13'(_G4368).
'13'([south|_G4409]):-'13'(_G4409).
'13'([shoot|_G4450]):-'13'(_G4450).
'8'([],_G4491).
'8'([_G4511|_G4512],_G4515):-length(_G4511,_G4515),'8'(_G4512,_G4515).
'11'(_G4664,_G4665,_G4666,_G4667,_G4668,_G4669,_G4670):-'4'(_G4664),nl,write('Starting at ('),write(_G4665),write(','),write(_G4666),write(')'),nl,write('Successfully killed wumpus with plan: '),write(_G4667),nl,write('Feedback: '),write(_G4668),nl,write('ATTEMPTS = '),write(_G4669),nl,write('ENERGY = '),write(_G4670),nl.
'12'(_G6564,_G6565):-'12'(_G6564,0,_G6565).
'12'([],_G6618,_G6618).
'12'([_G6643|_G6644],_G6647,_G6648):- (_G6643=shoot->_G6653=5;_G6653=1),_G6668 is _G6647+_G6653,'12'(_G6644,_G6668,_G6648).
'0'([],_G7116,_G7117,_G7118,_G7119,_G7120,[],no).
'0'([_G4025|_G4026],_G4030,_G4031,_G4032,_G4033,_G4034,[_G4028|_G4029],_G4035):-'14'(_G4025,_G4030,_G4031,_G4032,_G4033,_G4034,_G4036,_G4037,_G4038,_G4028), ((_G4028=pit;_G4028=wumpus)->_G4029=[],_G4035=no;_G4028=hit->_G4029=[],_G4035=yes;'0'(_G4026,_G4036,_G4037,_G4038,_G4033,_G4034,_G4029,_G4035)).
'14'(shoot,_G4775,_G4776,_G4777,_G4778,_G4779,_G4775,_G4776,_G4777,_G4783):-!,'15'(_G4778,_G4775,_G4776,_G4777,_G4783).
'14'(_G4976,_G4977,_G4978,_G4979,_G4980,_G4981,_G4982,_G4983,_G4976,_G4985):-'16'(_G4976,_G4977,_G4978,_G4990,_G4991),'7'(_G4980,_G4990,_G4991,_G4996),'7'(_G4981,_G4990,_G4991,_G4985), (_G4996=wall->_G4982=_G4977,_G4983=_G4978;_G4982=_G4990,_G4983=_G4991).
'16'(north,_G5670,_G5671,_G5672,_G5673):-_G5672=_G5670,_G5673 is _G5671-1.
'16'(south,_G5913,_G5914,_G5915,_G5916):-_G5915=_G5913,_G5916 is _G5914+1.
'16'(east,_G6156,_G6157,_G6158,_G6159):-_G6158 is _G6156+1,_G6159=_G6157.
'16'(west,_G6399,_G6400,_G6401,_G6402):-_G6401 is _G6399-1,_G6402=_G6400.
'7'(_G6641,_G6642,_G6643,_G6644):-'17'(_G6641,_G6643,_G6648),'17'(_G6648,_G6642,_G6644),!.
'7'(_G6835,_G6836,_G6837,wall).
'17'(_G6866,_G6867,_G6868):-'17'(_G6866,_G6867,1,_G6868).
'17'([_G6929|_G6930],_G6933,_G6934,_G6935):-_G6933>=_G6934, (_G6933=_G6934->_G6935=_G6929;_G6952 is _G6934+1,'17'(_G6930,_G6933,_G6952,_G6935)).
'15'(_G6259,_G6260,_G6261,_G6262,_G6263):-'7'(_G6259,_G6260,_G6261,_G6264), (_G6264=wumpus->_G6263=hit;_G6264=wall->_G6263=miss;'16'(_G6262,_G6260,_G6261,_G6284,_G6285),'15'(_G6259,_G6284,_G6285,_G6262,_G6263)).
'18'([]).
'18'([wall|_G6762]):-'18'(_G6762).
'9'([_G6802|_G6803],_G6806):-'19'([_G6802|_G6803],_G6812,_G6813),length(_G6802,_G6816),_G6821 is _G6816+2,length(_G6824,_G6821),'18'(_G6824),'20'([_G6802|_G6803],_G6833),append([_G6824|_G6833],[_G6824],_G6843),'21'(_G6843,1,_G6812,_G6813,_G6806).
'19'(_G7394,_G7395,_G7396):-'19'(_G7394,1,_G7395,_G7396).
'19'([_G7457|_G7458],_G7461,_G7462,_G7463):-member(wumpus,_G7457)->_G7462=_G7461,'22'(_G7457,1,_G7463);_G7484 is _G7461+1,'19'(_G7458,_G7484,_G7462,_G7463).
'22'([_G7875|_G7876],_G7879,_G7880):-_G7875=wumpus->_G7880=_G7879;_G7894 is _G7879+1,'22'(_G7876,_G7894,_G7880).
'20'([],[]).
'20'([_G8266|_G8267],[_G8269|_G8270]):-append([wall|_G8266],[wall],_G8269),'20'(_G8267,_G8270).
'21'([_G8432,_G8435],_G8439,_G8440,_G8441,[]).
'21'([_G8474,_G8477,_G8480|_G8481],_G8487,_G8488,_G8489,[_G8483|_G8484]):-'23'(_G8474,_G8477,_G8480,_G8487,1,_G8488,_G8489,_G8483),_G8504 is _G8487+1,'21'([_G8477,_G8480|_G8481],_G8504,_G8488,_G8489,_G8484).
'23'([_G8738,_G8741],[_G8744,_G8747],[_G8750,_G8753],_G8759,_G8760,_G8761,_G8762,[]).
'23'([_G8807,_G8810,_G8813|_G8814],[_G8816,_G8819,_G8822|_G8823],[_G8825,_G8828,_G8831|_G8832],_G8840,_G8841,_G8842,_G8843,[_G8834|_G8835]):- (_G8819=pit->_G8834=pit;_G8819=wall->_G8834=wall;_G8819=wumpus->_G8834=wumpus;abs(_G8840-_G8842)+abs(_G8841-_G8843)=:=1->_G8834=stench;abs(_G8840-_G8842)+abs(_G8841-_G8843)=<3->_G8834=smell; (_G8810=pit;_G8816=pit;_G8822=pit;_G8828=pit)->_G8834=damp;_G8834=empty),_G8968 is _G8841+1,'23'([_G8810,_G8813|_G8814],[_G8819,_G8822|_G8823],[_G8828,_G8831|_G8832],_G8840,_G8968,_G8842,_G8843,_G8835).
'4'([]).
'4'([_G10742|_G10743]):-'24'(_G10742),nl,'4'(_G10743).
'24'([]).
'24'([_G10920|_G10921]):-'6'(_G10920,_G10926),write(_G10926),'24'(_G10921).
'6'(unknown,' ').
'6'(empty,'.').
'6'(wall,#).
'6'(pit,'P').
'6'(wumpus,'W').
'6'(damp,d).
'6'(smell,?).
'6'(stench,!).
'25'([[empty,wall,empty,empty,empty,empty,empty,empty],[empty,wall,empty,empty,empty,empty,empty,empty],[empty,empty,pit,wall,empty,wumpus,empty,pit],[empty,empty,empty,pit,wall,empty,empty,empty],[empty,wall,empty,empty,empty,empty,empty,empty],[empty,wall,empty,empty,empty,empty,empty,empty],[empty,wall,empty,empty,empty,empty,empty,empty]]).
:-set_prolog_flag(protect_static_code,true).

